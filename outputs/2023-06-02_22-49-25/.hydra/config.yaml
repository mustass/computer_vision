general:
  run_name: run
  logs_folder_name: logs
  workspace: dmiai-mh
  project_name: DL4CV
  device: cpu
  log_code: false
  save_pytorch_model: true
  save_best: true
  convert_to_jit: true
  predict: true
callbacks:
  early_stopping:
    class_name: pytorch_lightning.callbacks.EarlyStopping
    params:
      monitor: val_${training.metric}
      patience: 10
      min_delta: 0.001
      verbose: true
      mode: ${training.mode}
  model_checkpoint:
    class_name: pytorch_lightning.callbacks.ModelCheckpoint
    params:
      monitor: val_${training.metric}
      save_top_k: 2
      dirpath: saved_models
      filename: '{epoch}-{val_${training.metric}:.6f}'
      mode: ${training.mode}
  other_callbacks:
  - class_name: pytorch_lightning.callbacks.LearningRateMonitor
    params:
      logging_interval: step
  - class_name: pytorch_lightning.callbacks.RichProgressBar
    params:
      leave: true
  - class_name: pytorch_lightning.callbacks.ModelSummary
    params:
      max_depth: 1
private: {}
datamodule:
  datamodule_name: dl4cv.lightning_classes.datamodule.CIFAR10DataModule
  path_to_metadata: ./data
  params:
    split:
    - 0.8
    - 0.2
    batch_size: 8
    num_workers: 4
    pin_memory: true
logging:
  log: true
  loggers:
  - class_name: pytorch_lightning.loggers.WandbLogger
    params:
      save_dir: ${general.logs_folder_name}
      project: ${general.project_name}
      name: ${general.run_name}
loss:
  class_name: torch.nn.NLLLoss
metric:
  metric:
    class_name: torchmetrics.Accuracy
    metric_name: accuracy
    params:
      threshold: 0.5
      num_classes: ${training.n_classes}
      top_k: 1
model:
  class_name: dl4cv.models.ResNet
  params:
    n_in: 3
    n_features: 8
    num_res_blocks: 3
    num_classes: 10
optimizer:
  class_name: torch.optim.Adam
  params:
    lr: ${training.lr}
scheduler:
  class_name: torch.optim.lr_scheduler.CosineAnnealingLR
  step: epoch
  monitor: train_${training.metric}
  params:
    T_max: 10
trainer:
  accelerator: cpu
  devices: null
  num_nodes: 1
  profiler: false
  max_epochs: 50
  log_every_n_steps: 10
  num_sanity_val_steps: 2
  auto_scale_batch_size: false
  fast_dev_run: false
training:
  lr: 0.0002
  metric: ${metric.metric.metric_name}
  mode: max
  n_classes: 10
  seed: 666
  debug: true
  lightning_module_name: dl4cv.lightning_classes.plmodel.LitCVModel
